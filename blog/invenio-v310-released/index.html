<!doctype html>
<title>Invenio v3.1.0 released â€” inveniosoftware.org</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="invenio, library, framework, ils, research, data, multimedia, ir, institutional, repository, cern, foss, open, software, model, search, workflows, marc, marc21, python, api, doi, json, memento, oai-pmh, orcid, openaire, rest, zenodo, cds, flask, angular">
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.min.js"></script>
<script async defer src="https://buttons.github.io/buttons.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/4.0.1/ekko-lightbox.min.js"></script>
<link rel="icon" href="/static/img/favicon.ico?h=981ca02e">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" href="/static/css/style.css?h=086c99b7">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Source+Code Pro:200,300,400,500,600,700,900">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/4.0.1/ekko-lightbox.css" />
<body>
  
  <section class="header-section">
    <div class="cover-image">
      
        <header>
  <nav class="navbar navbar-fixed-top invenio-navbar">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#inv-navbar-collapse" aria-controls="inv-navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="/" class="navbar-brand">
          <img src="/static/img/logo-invenio-white.svg?h=8686b0c0" alt="">
        </a>
      </div>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="inv-navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          
            <li><a href="/gettingstarted/">Get started</a></li>
          
            <li><a href="/#features">Features</a></li>
          
            <li><a href="/showcase/">Examples</a></li>
          
            <li><a href="http://invenio.readthedocs.io">Documentation</a></li>
          
            <li><a href="/community/">Community</a></li>
          
            <li><a href="/roadmap/">Roadmap</a></li>
          
            <li><a class="active-menu" href="/blog/">Blog</a></li>
          
        </ul>
      </div>
    </div>
  </nav>
</header>
      
      <div class="container">
        <div class="row">
          <div class="col">
            <div class="header-section-title">
              <h3>Invenio Blog</h3>
              <h6>Follow news and updates on Invenio world</h6>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <section id="blog-post-content-section" class="section-content-light-bg">
    <div class="container">
      <div class="row">
        <div class="col-md-8 col-xs-12 block-center">
            
  <div class="blog-back-button">
    <a href="/blog">Back</a>
  </div>
  <div class="blog-post blog-post-frame">
    <header class="post-header">
      <h2>
        
          Invenio v3.1.0 released
        
      </h2>
      <p class="post-meta">
        <i class='fa fa-user text-muted'></i>
        <span class="author">
          
            <a href="https://twitter.com/larshankat">Lars Holm Nielsen</a>
          
        </span>
        <i class='fa fa-calendar text-muted'></i>
        <span>Mar 11, 2019</span>
        <i class='fa fa-users text-muted'></i>
        <span class="label invenio-team"><a class="team-url" href="">Invenio</a></span>
      </p>
    </header>
    <article class="post-content">
      <p>We are proud to announce the release of Invenio v3.1.0.</p>
<p>Head over to our <a href="/gettingstarted/">Getting started</a> to see it in action.</p>
<h3>Python compatibility</h3>
<p>Invenio v3.1 supports Python 2.7 (until 2019-12-31), Python 3.5 and Python 3.6. We expect to add support for Python 3.7 in the near-term future once Celery v4.3 has been released.</p>
<h1>What's new in Invenio v3.1?</h1>
<h2>Webpack build system</h2>
<p>Invenio v3.1 comes with a new assets build system based on Webpack for building and packaging your JavaScript applications, stylesheets and much more. The system replaces the previous AMD/RequireJS based system which was deprecated in v3.0.</p>
<p>The old build system is still available to allow users to upgrade to Invenio v3.1 without first migrating to Webpack. The old build system will be removed in Invenio v3.3</p>
<p>For more information about the new build system, please see:</p>
<ul>
<li><a href="https://invenio-assets.readthedocs.io/">Invenio-Assets</a></li>
<li><a href="https://invenio-assets.readthedocs.io/en/latest/upgrade.html">Upgrade to Webpack</a></li>
</ul>
<h2>Simplified scaffolding</h2>
<p>We have simplified the scaffolding of new Invenio instance by merging the data model template into the main Cookiecutter-Invenio-Instance.</p>
<p>The previous approach of two separate packages -- one for the application and one for the data model -- caused friction and confusion for new users and we, therefore, decided to merge both.</p>
<p>This also fits with our <em>long-term</em> goal, where we want to provide standard data models (such as DataCite, Dublin Core, MARC21) so that users don't have write their own data model.</p>
<h4>Docker base image</h4>
<p>We have released a new Docker image that can serve as base image for your Invenio instances. The image is based on CentOS 7 and comes with Python 3.6, Node.JS, NPM and some standard libraries often needed by Invenio.</p>
<p>See <a href="https://cloud.docker.com/u/inveniosoftware/repository/docker/inveniosoftware/centos7-python">inveniosoftware/centos7-python</a> on DockerHub.</p>
<h4>Pipenv</h4>
<p>In order to manage Python dependencies more reliable and securely for your Invenio instance we have moved to use <a href="http://pipenv.readthedocs.io">Pipenv</a> which also handles the virtualenv creation. This has all been integrated with the <a href="/gettingstarted/">Getting started</a> guide.</p>
<h2>Documentation</h2>
<p>New sections where added to the documentation specifically on:</p>
<ul>
<li>Bundles</li>
<li>Requirements</li>
<li>Build a repository</li>
<li>Managing access</li>
<li>Secure your instance</li>
<li>Infrastructure architecture</li>
</ul>
<p>See <a href="https://invenio.readthedocs.io">https://invenio.readthedocs.io</a>.</p>
<h2>Request tracing</h2>
<p>Invenio v3.1 has added new features for improved request tracing to allow for better troubleshooting and auditing of problems. The feature allows logging a request id, session id and user id across multiple services such as Nginx and Invenio error logs. This enables e.g. system administrators to identify exactly which Nginx access log line caused a specific error logged by Invenio.</p>
<p>If combined with e.g. centralised log aggregation, this can be used for e.g. viewing requests by a user in real-time, request performance statistics and many other metrics. Please note that in order to be compliant with EU General Data Protection Regulation (GDPR), you must ensure that these logs are automatically deleted after 3 months (the same is the case if you only log an IP address).</p>
<ul>
<li><strong>Cookiecutter-Invenio-Instance</strong>:<ul>
<li>Nginx configuration has been updated to automatically generate a random
request id and add is as <code>X-Request-ID</code> header.</li>
<li>Nginx log format has been updated to log timing information, request id,
session id and user id if provided by the application server in the
<code>X-Session-ID</code> and <code>X-User-ID</code> HTTP headers. Nginx will remove both
headers prior to sending the response to the client.</li>
</ul>
</li>
<li><strong>Invenio-App</strong>:<ul>
<li>Extracts the <code>X-Request-ID</code> header (max 200 chars) if set in the HTTP
request and makes it available on the Flask <code>g</code> object as
<code>g.request_id</code>.</li>
</ul>
</li>
<li><strong>Invenio-Logging</strong>:<ul>
<li>The request id is made available to all log handlers.</li>
<li>The Sentry log handler will add the request ID as a tag if available.</li>
</ul>
</li>
<li><strong>Invenio-Accounts</strong><ul>
<li>The <code>X-Session-ID</code> and <code>X-User-ID</code> HTTP headers will be added to the
HTTP repsponse if the configuration variable
<code>ACCOUNTS_USERINFO_HEADERS</code> is set to <code>True</code>. This makes the session
and user id available to upstream servers like Nginx.</li>
</ul>
</li>
</ul>
<h1>Minor changes in v3.1</h1>
<h4>Token expiration</h4>
<p>The token expiration was changed from 5 days to 30 minutes for the password reset token and email confirmation token. Using the tokens will as a side-effect login in the user, which means that if the link is leaked (e.g. forwarded by the users themselves), then another person can use the link to access the account. Flask-Security v3.1.0 addresses this issue, but has not yet been released.</p>
<h4>Globus.org OAuth Login</h4>
<p>Invenio v3.1 now comes with support for login with your Globus.org account. The feature was contributed by University of Chicago.</p>
<p>See <a href="https://invenio-oauthclient.readthedocs.io/en/latest/usage.html#module-invenio_oauthclient.contrib.globus">Invenio-OAuthClient</a> for details.</p>
<h4>Health-check view</h4>
<p>A <code>/ping</code> view that can be enabled via the <code>APP_HEALTH_BLUEPRINT_ENABLED</code> configuration variable has been added to support load balancers like HAProxy to check if the application server is responsive.</p>
<h1>Backwards incompatible changes</h1>
<ul>
<li><strong>Pytest-Invenio:</strong> The <code>celery_config</code> fixture has been renamed to <code>celery_config_ext</code> due to naming conflict with fixture provided by Celery.</li>
</ul>
<h1>Deprecations in v3.1</h1>
<p>Following list of features have been deprecated and will be removed in either
Invenio v3.2 or Invenio v3.3:</p>
<h2>Elasticsearch v2 support</h2>
<p>Elasticsearch v2 support will be removed in Invenio v3.2. Elasticsearch v2 has reached end of life and no longer receives any bug or security fixes.</p>
<p>Both the support in Invenio-Search for creating indexes for v2 as well as any v2 Elasticsearch mappings in other Invenio modules will be removed.</p>
<h2>AMD/RequireJS</h2>
<p>Invenio's assets build system based on AMD/RequireJS will be removed in Invenio v3.3.</p>
<p>This involves e.g. the two CLI commands:</p>
<pre><code class="lang-shell">$ invenio npm
$ invenio assets build
</code></pre>
<p>Several Python modules in Invenio-Assets will be removed, including (but not
limited to):</p>
<ul>
<li><code>invenio_assets.npm</code></li>
<li><code>invenio_assets.filters</code></li>
<li><code>invenio_assets.glob</code></li>
<li><code>invenio_assets.proxies</code></li>
</ul>
<p>Also, bundle definitions in other Invenio modules will be removed. These are
usually located in <code>bundles.py</code> files, e.g.:</p>
<ul>
<li><code>invenio_theme.bundles</code></li>
</ul>
<p>Also, some static files will be removed from bundles, e.g.:</p>
<ul>
<li><code>invenio_theme/static/js/*</code></li>
<li><code>invenio_theme/static/scss/*</code></li>
</ul>
<h2>DynamicPermission class</h2>
<p>The <code>invenio_access.DynamicPermission</code> class will be removed in Invenio v3.2. It has been superseded by the <code>invenio_access.Permission</code> class. The <code>Permission</code> class by default deny an action in case no user/role is assigned. The <code>DynamicPermission</code> instead allowed an action if no user/role was assigned.</p>
<h2>Records CLI</h2>
<p>The following CLI commands will be removed in Invenio v3.2:</p>
<pre><code class="lang-shell">$ invenio records create
$ invenio records delete
$ invenio records patch
</code></pre>
<p>Please use the REST API instead to create, patch and delete records.</p>
<h2>AngularJS (reminder from v3.0)</h2>
<p>In Invenio v3.0 we deprecated the AngularJS 1.4 application Invenio-Search-JS as AngularJS by that time was already outdated. We have selected React and SemanticUI as the replacement framework for AngularJS.</p>
<p>The new Webpack build system released in Invenio v3.1 is part of the strategy to move from AngularJS to React (note however that you can use Webpack with your favorite framework, including AngularJS).</p>
<p>We have started the rewrite of Invenio-Search-JS and have already released the first version of <a href="https://inveniosoftware.github.io/react-searchkit/">React-SearckKit</a> which eventually will replace Invenio-Search-JS.</p>
<h1>Features removed in v3.1</h1>
<p>These following already deprecated features have been removed in Invenio v3.1.</p>
<ul>
<li><code>invenio_records.tasks</code> was removed from the Invenio-Records module.</li>
</ul>
<h1>Maintenance policy</h1>
<p>Invenio v3.1 will be supported with bug and security fixes until the release of
Invenio v3.3 and minimum until 2020-03-31.</p>
<h1>What's next?</h1>
<p>We originally planned to release the Files and Statistics bundle in Invenio v3.1. We however decided it was more urgent to release the new Webpack build system in order to avoid too much code being written against the old build system.</p>
<p>In Invenio v3.2 we are planning to release the <strong>Files</strong> bundle including:</p>
<ul>
<li><a href="https://invenio-files-rest.readthedocs.io">invenio-files-rest</a><ul>
<li>Object storage REST API for Invenio with many supported backend storage
protocols and file integrity checking.</li>
</ul>
</li>
<li><a href="https://invenio-iiif.readthedocs.io">invenio-iiif</a><ul>
<li>International Image Interoperability Framework (IIIF) server for making
thumbnails and zooming images.</li>
</ul>
</li>
<li><a href="https://invenio-iiif.readthedocs.io">invenio-previewer</a><ul>
<li>Previewer for Markdown, JSON/XML, CSV, PDF, JPEG, PNG, TIFF, GIF and ZIP
files.</li>
</ul>
</li>
<li><a href="https://invenio-iiif.readthedocs.io">invenio-records-files</a><ul>
<li>Integration layer between object storage and records.</li>
</ul>
</li>
</ul>

    </article>
    
  </div>

        </div>
      </div>
    </div>
  </section>
  
  <script type="text/javascript">
    $(document).ready(function() {
        $(document).delegate('*.post-content img', 'click', function(event) {
            $(this).data('remote', $(this).attr('src'));
            event.preventDefault(); $(this).ekkoLightbox();
        });
    });
  </script>


  <footer>
  <div class="contact-section section-content-dark-bg">
    <div class="container">
      <div class="row">
  <div class="col-md-6">
    <a href="/"><img class="icon-contact" src="/static/img/logo-invenio-white.svg?h=8686b0c0" /></a>
  </div>
  <div class="col-md-6">
    <h3 class="contact-title">Keep in touch</h3>
    <table class="contact-list">
      <tbody>
        <tr>
          <td class="contact-list-header">Documentation</td>
          <td><a href="https://invenio.readthedocs.io/en/latest/">Read The Docs</a></td>
        </tr>
        <tr>
          <td class="contact-list-header">GitHub</td>
          <td>
            <a href="https://github.com/inveniosoftware">@inveniosoftware</a> &middot; <a href="https://github.com/inveniosoftware-contrib">@inveniosoftware-contrib</a>
          </td>
        </tr>
        <tr>
          <td class="contact-list-header">Chat room</td>
          <td>
            <a href="https://gitter.im/inveniosoftware/invenio"><img src="/static/img/gitter.svg?h=e497f3c6"></a>
          </td>
        </tr>
        <tr>
          <td class="contact-list-header">Twitter</td>
          <td>
            <a href="https://twitter.com/inveniosoftware">@inveniosoftware <i class="fa fa-twitter" aria-hidden="true"></i></a>
          </td>
        </tr>
        <tr>
          <td class="contact-list-header">Weekly video meetings</td>
          <td><a href="https://indico.cern.ch/category/6046/">Invenio Developer Forum</a></td>
        </tr>
        <tr>
          <td class="contact-list-header">Yearly workshops</td>
          <td><a href="https://indico.cern.ch/category/6240/">Invenio User Group Workshop</a></td>
        </tr>
        <tr>
          <td class="contact-list-header">Email<br />
            <small>(note: no technical support)</small></td>
          <td>
            <a href="href=mailto:info@inveniosoftware.org?Subject=Hello">info @ inveniosoftware.org</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
    </div>
  </div>
  <div class="footer-bottom">
    <div class="container">
      <div class="row">
        <div class="col-md-12 centered">
          <span>Copyright &copy; 2016-2018 CERN &amp; contributors. Icons by <a href="http://fontawesome.io/">Font Awesome</a> and <a href="https://icons8.com/">Icons8</a>. Text is licensed under Creative Commons Attribution 4.0 International.<br>
          <span class="text-muted"><small></small></span>

        </div>
      </div>
    </div>
  </div>
</footer>
  <!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://piwik.web.cern.ch/" : "http://piwik.web.cern.ch/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
    var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 4535);
    piwikTracker.trackPageView();
    piwikTracker.enableLinkTracking();
} catch( err ) {}
</script>
<noscript><p><img src="http://piwik.web.cern.ch/piwik.php?idsite=4535" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->


  <script>
    //Main navigation scroll spy for shadow
    $(window).scroll(function() {
      var y = $(window).scrollTop();
      if (y > 0) {
        $(".invenio-navbar").addClass('invenio-navbar-not-top');
      } else {
        $(".invenio-navbar").removeClass('invenio-navbar-not-top');
      }
    });
  </script>
</body>
